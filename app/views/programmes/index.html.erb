<p hidden id="notice"><%= notice %></p>
<div style="text-align:center">
<br></br>
<h1>Manage Programmes</h1>
<br></br>

<div class="container-fluid">
  <div class="row justify-content-md-center">
    <div class="col-2">
      <%= link_to 'New Programme', new_programme_path, class:"btn btn-primary btn-lg" %>
    </div>
  </div>
  <hr>


<div class="row">
<div class="row row-cols-1 row-cols-md-4 g-4">
    <% @programmes.each do |programme| %>
    <div class = "col">
    <div class="card border-primary mb-3" style="width: 80%;">
        <h5 >
          <p><%= programme.programme_code %></p>
          <%= link_to 'Edit', edit_programme_path(programme),class: "btn btn-outline-primary pull-right" %>
          <%= link_to 'Delete', programme, method: :delete, data: { confirm: 'Are you sure you want to delete this user?' },class: "btn btn-outline-danger pull-right" %>
        </h5>

        <ul class="list-group list-group-flush">
                  <!-- Looping through each course belonging to that programme -->
                        <% @programmecourses.each do |programmecourse| %>
                          <%if programmecourse.programme_id == programme.id%>
                                <% @courses.each do |course| %>
                                  <%if course.id == programmecourse.course_id %>
                                    <li class="list-group-item"><%= course.CourseDescription %> <%= link_to 'Remove', programmecourse, method: :delete, data: { confirm: 'Are you sure?' } %></li>
                                  <%end%>
                                <%end%>
                          <%end%>
                <% end %>
              <li class="list-group-item"><%= link_to 'Add Courses', new_programme_course_path(:programme_code => programme.id),class: "btn btn-outline-primary" %></li>
              </ul>
    </div>
    </div>
    <% end %>
    </div>
</div>
</div>








<!--<%= link_to 'Manage Courses', courses_path, class: "btn btn-primary btn-lg" %>-->
